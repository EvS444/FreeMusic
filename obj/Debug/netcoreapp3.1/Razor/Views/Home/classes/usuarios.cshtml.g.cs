#pragma checksum "C:\Users\User\OneDrive\Documentos\Curso Técnico\freemusic\Views\Home\classes\usuarios.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "0899adca7d2285fdd4b2154359d84cde38cb6d10"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Home_classes_usuarios), @"mvc.1.0.view", @"/Views/Home/classes/usuarios.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\User\OneDrive\Documentos\Curso Técnico\freemusic\Views\_ViewImports.cshtml"
using freemusic;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\User\OneDrive\Documentos\Curso Técnico\freemusic\Views\_ViewImports.cshtml"
using freemusic.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"0899adca7d2285fdd4b2154359d84cde38cb6d10", @"/Views/Home/classes/usuarios.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"d713e117b9f08bc1712526294ea084fafdbe0b4b", @"/Views/_ViewImports.cshtml")]
    public class Views_Home_classes_usuarios : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral(@"<?php

Class Usuario
{
    private $pdo;
    public $msgErro = """";//tudo ok
    public function conectar($nome, $host, $usuario, $senha)
    {
        global $pdo;
        try {
            $pdo = new PDO(""mysql:dbname="".$nome."";host="".$host,$usuario,$senha);
        } catch (PDOException $e) {
            $msgErro = $e->getMessage();
        }                  
    }

    public function cadastrar($nome, $telefone, $email, $senha)
    {
        global $pdo;
        //verificar se já existe o email cadastrado
        $sql = $pdo->prepare(""SELECT id_usuario FROM usuarios WHERE email = :e"");
        $sql->bindValue("":e"",$email);
        $sql->execute();
        if($sql->rowCount() > 0)
        {
            return false; //já está cadastrado
        }
        else
        {
            //caso não, Cadastrar   
            $sql = $pdo->prepare(""INSERT INTO usuarios (nome, telefone, email, senha) VALUES (:n, :t, :e, :s)"");
            $sql->bindValue("":n"",$nome);
            $sql->");
            WriteLiteral(@"bindValue("":t"",$telefone);
            $sql->bindValue("":e"",$email);
            $sql->bindValue("":s"",md5($senha));
            $sql->execute();
            return true; //tudo ok
        }     

    }

    public function logar($email, $senha)
    {
        global $pdo;
        //verificar se o email e senha estão cdastrados, se sim
        $sql = $pdo->prepare(""SELECT id_usiaro FROM usuarios WHERE email = :e AND senha = :s"");
        $sql->bindValue("":e"",$email);
        $sql->bindValue("":s"",md5($senha));
        sql->execute();
        if($sql->rowCount() > 0)
        {
        //entrar no sistema (sessão)
        $dado = $sql->fetch();
        session_start();
        $_SESSION['id_usuario'] = $dado['id_usuario'];
        return true; //logado com sucesso
        }
        else
        {
            return false; //não foi possivel logar
        }      
    }
}

?>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
